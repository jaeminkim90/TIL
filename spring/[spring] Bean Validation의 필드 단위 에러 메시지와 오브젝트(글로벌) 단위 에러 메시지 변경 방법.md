> ### ğŸ“– âœï¸ 
> **ì´ ê¸€ì€ `Bean Validation`ì„ ì´ìš©í•œ ê²€ì¦ ì‹œ, í•„ë“œ ë‹¨ìœ„ ì˜ ì—ëŸ¬ ë©”ì‹œì§€ì™€ ì˜¤ë¸Œì íŠ¸(ê¸€ë¡œë²Œ) ë‹¨ìœ„ì˜ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì»¤ìŠ¤í…€ í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ í•™ìŠµí•˜ê³  ì •ë¦¬í•œ í¬ìŠ¤íŒ…ì´ë‹¤.**


---

# Bean Validationì˜ ì—ëŸ¬ ë©”ì‹œì§€ ë³€ê²½ ë°©ë²•

**Bean Validation** ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ì»¤ìŠ¤í…€í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•„ë“œ ë‹¨ìœ„ì˜ ì—ëŸ¬ë©”ì‹œì§€ì™€ ì˜¤ë¸Œì íŠ¸ ë‹¨ìœ„ì˜ ì—ëŸ¬ë©”ì‹œì§€ë¡œ ë‚˜ëˆ ì„œ ì‚´í´ë³´ì.

---

## 1. í•„ë“œ ë‹¨ìœ„ì˜ ì—ëŸ¬ë©”ì‹œì§€ ë³€ê²½ ë°©ë²•

**Bean Validation**ì„ ì ìš©í•˜ê³  **bindingResult**ì— ë“±ë¡ëœ ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ì. ì˜¤ë¥˜ ì½”ë“œê°€ ì• ë…¸í…Œì´ì…˜ ì´ë¦„ìœ¼ë¡œ ë“±ë¡ëœë‹¤. ë§ˆì¹˜ `typeMismatch`ì™€ ìœ ì‚¬í•˜ë‹¤. `NotBlank`ë¼ëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ `MessageCodesResolver`ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ë©”ì‹œì§€ ì½”ë“œê°€ ìˆœì„œëŒ€ë¡œ ìƒì„±ëœë‹¤. 

> **@NotBlank** 
- `NotBlank.item.itemName` 
- `NotBlank.itemName` 
- `NotBlank.java.lang.String` 
- `NotBlank` 
  
> **@Range** 
- `Range.item.price` 
- `Range.price` 
- `Range.java.lang.Integer` 
- `Range` 

ì˜¤ë¥˜ ë©”ì‹œì§€ì˜ ë³€ê²½ì€ í•´ë‹¹ ë©”ì‹œì§€ ì½”ë“œë¥¼ `errors.properties`ì— ìˆ˜ì • ë“±ë¡í•˜ë©´ ëœë‹¤. ì§ì ‘ ë©”ì‹œì§€ ë‚´ìš©ì„ ìˆ˜ì •í•´ë³´ì.

> **errors.properties**  
> ```java
#Bean Validation ì¶”ê°€
NotBlank={0} ê³µë°± X
Range={0}, {2} ~ {1} í—ˆìš© 
Max={0}, ìµœëŒ€ {1}
```

`{0}`ì€ í•„ë“œëª…ì´ê³ , `{1}`ê³¼ `{2}`ëŠ” ê° ì• ë…¸í…Œì´ì…˜ ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ì‚¬ìš©ëœë‹¤. `Range`ì˜ index ìˆœì„œê°€ {2} ~ {1} ì¸ ì´ìœ ëŠ” Annotationì˜ ì†ì„± ì´ë¦„ì´ ì•ŒíŒŒë²³ ìˆœì„œë¡œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì´ë‹¤. `Range`ì—ëŠ” `Min`ê³¼ `Max` ë‘ê°€ì§€ ì†ì„±ì´ ìˆë‹¤. `Max`ê°€ `Min`ë³´ë‹¤ ì•ŒíŒŒë²³ ê¸°ì¤€ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤.

ì˜¤ë¥˜ ë©”ì‹œì§€ ìˆ˜ì •í›„ ì‹¤í–‰ì„ í•´ë³´ë©´ ë°©ê¸ˆ ë“±ë¡í•œ ë©”ì‹œì§€ê°€ ì •ìƒ ì‘ë™ë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

### 1-1. í•„ë“œ ë‹¨ìœ„ BeanValidation ë©”ì‹œì§€ê°€ ê²°ì •ë˜ëŠ” ìˆœì„œ

1. ìƒì„±ëœ ë©”ì‹œì§€ ì½”ë“œ ìˆœì„œëŒ€ë¡œ `messageSource`ì—ì„œ ë©”ì‹œì§€ë¥¼ ì°¾ëŠ”ë‹¤.
2. ì• ë…¸í…Œì´ì…˜ì˜ `message` ì†ì„±ì„ ì‚¬ìš©í•œë‹¤.
ex) `@NotBlank(message = "ê³µë°±! {0}")`  
3. ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë©”ì‹œì§€ ë‚´ìš©ì„ ì‚¬ìš©í•œë‹¤.
ex) ê³µë°±ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 


**ì• ë…¸í…Œì´ì…˜ì— message ì†ì„± ì‚¬ìš© ì˜ˆì‹œ**
```java
@NotBlank(message = "ê³µë°±ì€ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.") 
private String itemName; 
```


---

## 2. ì˜¤ë¸Œì íŠ¸ ë‹¨ìœ„ì˜ ì—ëŸ¬ë©”ì‹œì§€ ë³€ê²½ ë°©ë²•

**Bean Validation**ì—ì„œ íŠ¹ì • í•„ë“œ(`FieldError`)ê°€ ì•„ë‹Œ í•´ë‹¹ ì˜¤ë¸Œì íŠ¸ ê´€ë ¨ ì˜¤ë¥˜(`ObjectError`)ë„ ë©”ì‹œì§€ ì»¤ìŠ¤í…€ì´ ê°€ëŠ¥í•˜ë‹¤. ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. 

### 2-1. @ScriptAssert()ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

```java
@Data
@ScriptAssert(lang = "javascript", script = "_this.price * _this.quantity >= 10000")
    public class Item {
    //... 
} 
```

ì‹¤í–‰í•´ë³´ë©´ ì •ìƒ ìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë©”ì‹œì§€ ì½”ë“œë„ ì•„ë˜ì™€ ê°™ì´ ìƒì„±ëœë‹¤. 

**ScriptAssert ë©”ì‹œì§€ ì½”ë“œ** 
```java
ScriptAssert.item
ScriptAssert
```

í•„ë“œ ì˜¤ë¥˜ ë©”ì‹œì§€ì²˜ëŸ¼ `@ScriptAssert()` ì• ë…¸í…Œì´ì…˜ì— ì§ì ‘ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.

```java
@ScriptAssert(lang = "javascript", script = "_this.price * _this.quantity >= 10000 ", message = "ì´í•©ì´ 10,000ì„ ë„˜ì–´ì•¼ í•©ë‹ˆë‹¤.")
```

### 2-2. ìë°” ì½”ë“œë¡œ ì§ì ‘ êµ¬í˜„

`@ScriptAssert()`ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì€ ê¸°ëŠ¥ ëŒ€ë¹„ ì œì•½ì´ ë§ê³  ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤. ê²€ì¦ ë²”ìœ„ê°€ ê°ì²´ë¥¼ ë„˜ì–´ì„œëŠ” ê²½ìš° ëŒ€ì‘ì´ ì–´ë µë‹¤ëŠ” ì ë„ ë¬¸ì œê°€ ëœë‹¤. ë”°ë¼ì„œ ì˜¤ë¸Œì íŠ¸ ì˜¤ë¥˜(ê¸€ë¡œë²Œ ì˜¤ë¥˜)ì˜ ê²½ìš° `@ScriptAssert`ì„ ì–µì§€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ ë³´ë‹¤, ì˜¤ë¸Œì íŠ¸ ì˜¤ë¥˜ ê´€ë ¨ ë¶€ë¶„ë§Œ ì§ì ‘ ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì—¬ëŸ¬ ë©´ì—ì„œ ë‚«ë‹¤.


**ValidationItemControllerV3 - ê¸€ë¡œë²Œ ì˜¤ë¥˜ ì§ì ‘ ì¶”ê°€**
```java
@PostMapping("/add")
public String addItem(@Validated @ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {

    // ë³µí•© ì¡°ê±´(ê°€ê²©*ìˆ˜ëŸ‰ 10,000ì› ì´ìƒ) ê²€ì¦
    if (item.getPrice() != null && item.getQuantity() != null) {
        int resultPrice = item.getPrice() * item.getQuantity();
        if (resultPrice < 10000) {
            bindingResult.reject("totalPriceMin", new Object[]{10000, resultPrice}, null);
        }
    }
```